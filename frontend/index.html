<!DOCTYPE html>
<html>

  <head>
    <title>Brax visualizer</title>
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
  </head>

  <style>
    body {
      margin: 0;
      padding: 0;
    }

    #brax-viewer {
      height: 100vh;
      width: 100vw;
      margin: 0;
      padding: 0;
    }
  </style>
  <script async src="https://unpkg.com/es-module-shims@1.6.3/dist/es-module-shims.js"></script>

  <script type="importmap">
    {
      "imports": {
        "three": "https://unpkg.com/three@0.150.1/build/three.module.js",
        "three/addons/": "https://unpkg.com/three@0.150.1/examples/jsm/",
        "lilgui": "https://cdn.jsdelivr.net/npm/lil-gui@0.18.0/+esm",
        "viewer": "/static/js/viewer.js"
      }
    }
  </script>

  <!-- <script src="https://unpkg.com/pako@2.1.0/dist/pako.min.js"></script> -->

  <script type="application/javascript">
  var system = '{"opt": {"timestep": 0.015, "name": "Option"}, "link_names": ["torso", "lwaist", "pelvis", "right_thigh", "right_shin", "left_thigh", "left_shin", "right_upper_arm", "right_lower_arm", "left_upper_arm", "left_lower_arm"], "name": "System", "geoms": {"world": [{"name": "Plane", "link_idx": -1, "pos": [0.0, 0.0, 0.0], "rot": [1.0, 0.0, 0.0, 0.0], "rgba": [0.4, 0.33, 0.26, 1.0], "size": [20.0, 20.0, 0.125]}], "torso": [{"name": "Capsule", "link_idx": 0, "pos": [0.0, 0.0, 0.0], "rot": [0.7071067690849304, 0.7071067690849304, 0.0, -0.0], "rgba": [0.4000000059604645, 0.33000001311302185, 0.25999999046325684, 1.0], "size": [0.07000000029802322, 0.07000000029802322, 0.0]}, {"name": "Sphere", "link_idx": 0, "pos": [0.0, 0.0, 0.1899999976158142], "rot": [1.0, 0.0, 0.0, 0.0], "rgba": [0.4000000059604645, 0.33000001311302185, 0.25999999046325684, 1.0], "size": [0.09000000357627869, 0.0, 0.0]}, {"name": "Capsule", "link_idx": 0, "pos": [-0.009999999776482582, 0.0, -0.11999999731779099], "rot": [0.7071067690849304, 0.7071067690849304, 0.0, -0.0], "rgba": [0.4000000059604645, 0.33000001311302185, 0.25999999046325684, 1.0], "size": [0.05999999865889549, 0.05999999865889549, 0.0]}], "lwaist": [{"name": "Capsule", "link_idx": 1, "pos": [0.0, 0.0, 0.0], "rot": [0.7071067690849304, 0.7071067690849304, 0.0, -0.0], "rgba": [0.4000000059604645, 0.33000001311302185, 0.25999999046325684, 1.0], "size": [0.05999999865889549, 0.05999999865889549, 0.0]}], "pelvis": [{"name": "Capsule", "link_idx": 2, "pos": [-0.019999999552965164, 0.0, 0.0], "rot": [0.7071067690849304, 0.7071067690849304, 0.0, -0.0], "rgba": [0.4000000059604645, 0.33000001311302185, 0.25999999046325684, 1.0], "size": [0.09000000357627869, 0.07000000029802322, 0.0]}], "right_thigh": [{"name": "Capsule", "link_idx": 3, "pos": [0.0, 0.004999999888241291, -0.17000000178813934], "rot": [0.9998919367790222, 0.0147011149674654, 0.0, -0.0], "rgba": [0.4000000059604645, 0.33000001311302185, 0.25999999046325684, 1.0], "size": [0.05999999865889549, 0.1700735092163086, 0.0]}], "right_shin": [{"name": "Capsule", "link_idx": 4, "pos": [0.0, 0.0, -0.15000000596046448], "rot": [1.0, 0.0, 0.0, 0.0], "rgba": [0.4000000059604645, 0.33000001311302185, 0.25999999046325684, 1.0], "size": [0.04899999871850014, 0.15000000596046448, 0.0]}, {"name": "Sphere", "link_idx": 4, "pos": [0.0, 0.0, -0.3499999940395355], "rot": [1.0, 0.0, 0.0, 0.0], "rgba": [0.4000000059604645, 0.33000001311302185, 0.25999999046325684, 1.0], "size": [0.07500000298023224, 0.0, 0.0]}], "left_thigh": [{"name": "Capsule", "link_idx": 5, "pos": [0.0, -0.004999999888241291, -0.17000000178813934], "rot": [0.9998919367790222, -0.0147011149674654, 0.0, 0.0], "rgba": [0.4000000059604645, 0.33000001311302185, 0.25999999046325684, 1.0], "size": [0.05999999865889549, 0.1700735092163086, 0.0]}], "left_shin": [{"name": "Capsule", "link_idx": 6, "pos": [0.0, 0.0, -0.15000000596046448], "rot": [1.0, 0.0, 0.0, 0.0], "rgba": [0.4000000059604645, 0.33000001311302185, 0.25999999046325684, 1.0], "size": [0.04899999871850014, 0.15000000596046448, 0.0]}, {"name": "Sphere", "link_idx": 6, "pos": [0.0, 0.0, -0.3499999940395355], "rot": [1.0, 0.0, 0.0, 0.0], "rgba": [0.4000000059604645, 0.33000001311302185, 0.25999999046325684, 1.0], "size": [0.07500000298023224, 0.0, 0.0]}], "right_upper_arm": [{"name": "Capsule", "link_idx": 7, "pos": [0.07999999821186066, -0.07999999821186066, -0.07999999821186066], "rot": [0.8880738615989685, -0.32505759596824646, -0.32505759596824646, 0.0], "rgba": [0.4000000059604645, 0.33000001311302185, 0.25999999046325684, 1.0], "size": [0.03999999910593033, 0.1385640650987625, 0.0]}], "right_lower_arm": [{"name": "Capsule", "link_idx": 8, "pos": [0.09000000357627869, 0.09000000357627869, 0.09000000357627869], "rot": [0.4597008526325226, 0.6279630064964294, -0.6279630064964294, 0.0], "rgba": [0.4000000059604645, 0.33000001311302185, 0.25999999046325684, 1.0], "size": [0.03099999949336052, 0.1385640650987625, 0.0]}, {"name": "Sphere", "link_idx": 8, "pos": [0.18000000715255737, 0.18000000715255737, 0.18000000715255737], "rot": [1.0, 0.0, 0.0, 0.0], "rgba": [0.4000000059604645, 0.33000001311302185, 0.25999999046325684, 1.0], "size": [0.03999999910593033, 0.0, 0.0]}], "left_upper_arm": [{"name": "Capsule", "link_idx": 9, "pos": [0.07999999821186066, 0.07999999821186066, -0.07999999821186066], "rot": [0.8880738615989685, 0.32505759596824646, -0.32505759596824646, 0.0], "rgba": [0.4000000059604645, 0.33000001311302185, 0.25999999046325684, 1.0], "size": [0.03999999910593033, 0.1385640650987625, 0.0]}], "left_lower_arm": [{"name": "Capsule", "link_idx": 10, "pos": [0.09000000357627869, -0.09000000357627869, 0.09000000357627869], "rot": [0.4597008526325226, -0.6279630064964294, -0.6279630064964294, 0.0], "rgba": [0.4000000059604645, 0.33000001311302185, 0.25999999046325684, 1.0], "size": [0.03099999949336052, 0.1385640650987625, 0.0]}, {"name": "Sphere", "link_idx": 10, "pos": [0.18000000715255737, -0.18000000715255737, 0.18000000715255737], "rot": [1.0, 0.0, 0.0, 0.0], "rgba": [0.4000000059604645, 0.33000001311302185, 0.25999999046325684, 1.0], "size": [0.03999999910593033, 0.0, 0.0]}]}, "states": {"x": [{"pos": [[-0.0019270729972049594, 0.0009778999956324697, 1.3944528102874756], [-0.012343442998826504, 0.005081566516309977, 1.1378393173217773], [-0.01182105764746666, 0.008278935216367245, 0.9749842882156372], [-0.013959021307528019, -0.0895034447312355, 0.9332829117774963], [-0.014136454090476036, -0.06929808855056763, 0.5358315110206604], [-0.009108515456318855, 0.10782710462808609, 0.9377313852310181], [-0.003608015365898609, 0.10341556370258331, 0.5398296117782593], [-0.004467868711799383, -0.1677161604166031, 1.4511032104492188], [0.16743220388889313, -0.3466992974281311, 1.2690503597259521], [0.0009139919420704246, 0.16784964501857758, 1.4562522172927856], [0.18119116127490997, 0.3437262773513794, 1.2793471813201904]], "rot": [[0.9999375343322754, 0.0076812924817204475, 0.0013289343332871795, -0.00800740160048008], [0.9998937249183655, 0.007657997775822878, -0.0014557779068127275, -0.012321745045483112], [0.9998549222946167, 0.011223969049751759, -0.0034998394548892975, -0.012324548326432705], [0.9998885989189148, 0.012989857234060764, 0.0004773605614900589, -0.007338755298405886], [0.9998882412910461, 0.01299329474568367, 0.0009459033026359975, -0.007332666777074337], [0.9998469948768616, 0.006962989456951618, -0.0070196217857301235, -0.01443241722881794], [0.9998210072517395, 0.006919096689671278, -0.010058154352009296, -0.014453510753810406], [0.9998942017555237, 0.007578534539788961, 0.004728564992547035, -0.011479325592517853], [0.9998620748519897, 0.007590561173856258, 0.00652700150385499, -0.013250683434307575], [0.9999375343322754, 0.004758846014738083, 0.002490357728675008, -0.00979671161621809], [0.999950110912323, 0.004792230203747749, 0.0051970831118524075, -0.007064010016620159]], "name": "Transform"}]}}';
  // // decode base64 (convert ascii to binary)
  // system = atob(system);
  // // convert binary string to character-number array
  // system = system.split('').map(function(x){return x.charCodeAt(0);});
  // // decompress
  // system = pako.inflate(system);
  // // convert gunzipped byteArray back to ascii string
  // system = new TextDecoder("utf-8").decode(system);
  // // and load json
  system = JSON.parse(system);
  </script>

  <body>

    <div id="brax-viewer"></div>

    <script type="module">
      import {Viewer, setupLiveFrameWebSocket} from 'viewer';
      const domElement = document.getElementById("brax-viewer");
      var viewer = new Viewer(domElement, system);
      setupLiveFrameWebSocket(system, viewer);
    </script>

  </body>

</html>